"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2314],{52869:function(e,t,n){function l(e){let t=void 0!==e.jsonInfo;return!t}function a(e){let t=void 0!==e.jsonInfo;return t}function s(e){return"rewardInfos"in e&&"lpMint"in e&&"category"in e&&"authority"in e}n.d(t,{aE:function(){return l},ef:function(){return s},lr:function(){return a}})},29197:function(e,t,n){n.d(t,{Z:function(){return d}});var l=n(85893),a=n(18074),s=n(27993),i=n(66180),r=n(45826),o=n(91107);function c(e){let{className:t,style:n,vertical:a,itemClassName:r,itemStyle:c,values:d,currentValue:u=d[0],labels:m=d,onChange:f}=e;return d.filter(Boolean).length?(0,l.jsx)(o.E,{value:u,onChange:null!=f?f:()=>{},className:(0,i.m)("".concat(a?"flex-col":"flex"," ").concat(null!=t?t:"")),style:n,children:d.map((e,t,n)=>(0,l.jsx)(o.E.Option,{value:e,className:"cursor-pointer flex grow",children:i=>{let{checked:o}=i;return e&&(0,l.jsx)("div",{className:"grid grow ".concat(a?"":"place-items-center"," ").concat((0,s.u)(r,[o])),style:(0,s.u)(c,[o,t,n]),children:(0,s.u)(m[t],[o,t,n])})}},t))}):(0,l.jsx)(l.Fragment,{})}function d(e){let{size:t,$valuesLength:n,$transparentBg:o,urlSearchQueryKey:d,className:u,...m}=e;(0,r.i)({currentValue:m.currentValue,values:m.values,onChange:m.onChange,queryKey:d});let f=m.currentValue&&m.values.includes(m.currentValue),p=null!=n?n:m.values.length,x=(f?m.values.findIndex(e=>e===m.currentValue):0)+0;return(0,l.jsx)(c,{...m,currentValue:m.currentValue,className:(0,i.m)("rounded-full p-1",o?"bg-transparent":"bg-cyberpunk-card-bg",u),itemClassName:e=>(0,i.m)("sm"===t?"min-w-[82px] mobile:min-w-[64px] px-2 mobile:px-1.5 h-7 mobile:h-5 text-sm mobile:text-xs":"min-w-[96px] mobile:min-w-[76px] px-3 mobile:px-2 h-9 mobile:h-7 text-sm mobile:text-xs ","grid rounded-full place-items-center font-medium whitespace-nowrap ".concat(e?"text-white":"text-[#ABC4FF]"),(0,s.u)(m.itemClassName,[e])),itemStyle:e=>e?{background:"linear-gradient(245.22deg, rgb(218, 46, 239), rgb(43, 106, 255), rgb(57, 208, 216))",backgroundSize:"".concat(p,"00% 100%"),backgroundPosition:(0,a.Z)(1/(p-1)*x)}:{}})}},61652:function(e,t,n){n.d(t,{Z:function(){return ea}});var l=n(85893),a=n(67294),s=n(84207),i=n(5593),r=n(27713);function o(e){let{tick:t,price:n}=i.c2c.getPriceAndTick({baseIn:"base"===e.baseSide,poolInfo:e.info,price:(0,r.I2)((0,s.Z)(e.price))});return{tick:t,price:(0,r.eZ)(n)}}var c=n(62952),d=n(79162),u=n(92867);async function m(e){let{info:t,baseAmount:n,quoteAmount:l,tickLower:a,tickUpper:s,slippage:r}=e,[o,m]=await Promise.all([(0,d.b)({mints:[t.mintA.mint,t.mintB.mint]}),(0,u.$)()]),{amountA:f,amountB:p,liquidity:x,amountSlippageA:b,amountSlippageB:v}=i.c2c.getLiquidityFromAmounts({add:!0,poolInfo:t,amountA:n.raw,amountB:l.raw,tickLower:Math.min(a,s),tickUpper:Math.max(a,s),slippage:r,token2022Infos:o,epochInfo:m});return{resultBaseAmount:(0,c.n)(n.token,f.amount),resultQuoteAmount:(0,c.n)(l.token,p.amount),liquidity:x,amountSlippageBase:b,amountSlippageQuote:v}}var f=n(13550),p=n.n(f),x=n(34003),b=n(3363),v=n(49641),h=n(57435),g=n(475),j=n(8667),y=n(19036),N=n(53002),Z=n(62707),k=n(69221),w=n(91371),C=n(94678),P=n(52869),R=n(26427),M=n(96662),E=n(31166),S=n(49047),I=n(21686),A=n(43067),T=n(6994),B=n(70745),q=n(54592),F=n(32029),L=n(60421),O=n(48162),D=n(66042),z=n(40816),G=n(6325),V=n(51800),U=n(91148),_=n(72616),H=n(18074),K=n(4465),W=n(81451),$=n(51523),Q=n(72573),J=n(99111),Y=n(47857),X=n(62361),ee=n(92224),et=n(67858),en=n(71122),el=n(66180);function ea(e){let{info:t,open:n,onClose:s}=e,i=(0,k.p)(e=>e.loadedHydratedClmmInfos),r=(0,k.p)(e=>e.jsonInfos),o=(0,a.useMemo)(()=>r.find(e=>(0,P.ef)(t)?e.farmIds.includes((0,b.ZP)(t.id)):e.ammId===(0,b.ZP)(t.id)),[r,t]),c=(0,a.useMemo)(()=>{if(!o)return;let e=[...i.values()];return e.find(e=>(0,b.ZP)(e.id)===(null==o?void 0:o.clmmId))},[o,i]),d=(0,P.ef)(t)&&(0,P.lr)(t),u=(0,J.Z)(()=>{if(!d)return t;if(!o)return;let e=(0,b.ZP)(o.ammId),{hydrated:n}=function(e){let t=!1,n=()=>{t=!0},l=h.Z.getState(),{jsonInfos:a,sdkParsedInfos:s}=l,i=M.ZP.getState(),{connection:r}=i,o=(0,R.ZP)(s,e=>(0,b.ZP)(e.id)),c=e=>!!o[(0,b.ZP)(e)],d=(0,I.Z)(a.filter(t=>e.includes(t.id)&&!c(t.id)),r).then(e=>{let t=(0,R.ZP)(e,e=>(0,b.ZP)(e.id));return h.Z.setState(t=>({sdkParsedInfos:[...t.sdkParsedInfos,...e]})),{...t,...o}}),u=d.then(e=>{if(t)return;let{getLpToken:n,getToken:l}=E.ZP.getState(),{pureRawBalances:a}=N.Z.getState(),{hydratedInfos:s}=h.Z.getState(),i=(0,R.ZP)(s,e=>(0,b.ZP)(e.id)),r=e=>!!i[(0,b.ZP)(e)],o=Object.values(e).filter(e=>!r(e.id)).map(e=>(0,S.Z)(e,{getToken:l,getLpToken:n,lpBalance:a[(0,b.ZP)(e.lpMint)]}));h.Z.setState(e=>({hydratedInfos:[...e.hydratedInfos,...o]}));let c=(0,R.ZP)(o,e=>(0,b.ZP)(e.id));return{...i,...c}});return{abort:n,hydrated:u,sdkParsed:d}}([e]);return n.then(t=>null==t?void 0:t[e])},[d,t,o]);(0,a.useEffect)(()=>{k.p.setState({shouldLoadedClmmIds:new Set(r.map(e=>e.clmmId))})},[r]);let m=e=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"relative mb-5",children:[(0,l.jsx)("div",{className:"text-white text-lg font-medium mb-3",children:"Migrate to Concentrated Liquidity pool"}),(0,l.jsxs)("div",{className:"text-[#abc4ff] text-sm",children:["Migrate below or learn more about CLMM pools and risks"," ",(0,l.jsx)(D.Z,{className:"inline-block font-bold",href:"https://docs.raydium.io/raydium/liquidity-providers/providing-concentrated-liquidity-clmm",children:"here"}),"."]}),(0,l.jsx)(O.Z,{heroIconName:"x",size:"lg",className:"absolute top-0 right-0 text-[#abc4ff] text-sm cursor-pointer",onClick:e})]}),(0,l.jsx)(es,{clmmInfo:c,migrationJsonInfo:o,farmInfo:d?t:void 0,liquidityInfo:u,onMigrateSuccess:e})]});return(0,l.jsx)(G.Z,{placement:"from-bottom",open:n,onClose:()=>{s()},children:e=>{let{close:t}=e;return(0,l.jsx)(T.Z,{className:"p-6 mobile:p-4 rounded-3xl mobile:rounded-lg ".concat("w-[min(600px,90vw)]"," mobile:w-full max-h-[80vh] overflow-auto border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card transition"),size:"lg",children:m(t)})}})}function es(e){var t,n,s,r,d,u,f,k,P,R,E,S,I,T,D;let{liquidityInfo:G,farmInfo:J,migrationJsonInfo:en,clmmInfo:el,onMigrateSuccess:ea}=e,es=(0,M.ZP)(e=>e.connection),eo=(0,N.Z)(e=>e.pureRawBalances),ec=(0,w.ZP)(e=>e.slippageTolerance),ed=Number((0,Q.B)(ec)),[eu,{on:em,off:ef}]=(0,ee.ZP)(),[ep,ex]=(0,a.useState)("quick"),[eb,ev]=(0,a.useState)("base"),eh=(0,a.useMemo)(()=>{let e=el&&(0,_.y)((0,$.hi)(el.ammConfig.tradeFeeRate,1e4),{alreadyDecimaled:!0});return(0,H.Z)(e,{fixed:4,alreadyPercented:!0})},[el]),eg=null==G?void 0:G.lpToken,ej=J?J.userStakedLpAmount:G&&eg&&(0,c.n)(eg,eo[(0,b.ZP)(G.lpMint)]),ey=(0,C.ZP)(e=>e.timeBasis),eN=(0,a.useMemo)(()=>{var e,t;return(0,K.aT)(null==G?void 0:G.baseMint,null==el?void 0:null===(e=el.quote)||void 0===e?void 0:e.mint)&&(0,K.aT)(null==G?void 0:G.quoteMint,null==el?void 0:null===(t=el.base)||void 0===t?void 0:t.mint)},[el,G])//! it may base-quote in lp/liquidity, but quote-base in clmm
,eZ=(0,a.useMemo)(()=>eN?null==G?void 0:G.quoteToken:null==G?void 0:G.baseToken,[G,eN]),ek=(0,a.useMemo)(()=>eN?null==G?void 0:G.baseToken:null==G?void 0:G.quoteToken,[G,eN]),ew=G&&eg&&eZ&&(0,$.hi)((0,c.n)(eZ,eN?G.quoteReserve:G.baseReserve),(0,c.n)(eg,G.lpSupply)),eC=G&&eg&&ek&&(0,$.hi)((0,c.n)(ek,eN?G.baseReserve:G.quoteReserve),(0,c.n)(eg,G.lpSupply)),eP=ej&&ew?(0,c.n)(eZ,(0,$.dC)(ej,ew),{alreadyDecimaled:!0}):void 0,eR=ej&&eC?(0,c.n)(ek,(0,$.dC)(ej,eC),{alreadyDecimaled:!0}):void 0,eM=null==el?void 0:el.currentPrice,eE="base"===eb&&en?en.defaultPriceMin:1/en.defaultPriceMax,eS="base"===eb&&en?en.defaultPriceMax:1/en.defaultPriceMin,[eI,eA,eT]=(0,X.$)((0,$.dC)(eM,.85));(0,a.useEffect)(()=>{eA((0,$.dC)(eM,.85))},[eM]);let[eB,eq]=(0,a.useState)(),eF=(0,a.useRef)(),[eL,eO]=(0,a.useState)(),[eD,ez,eG]=(0,X.$)((0,$.dC)(eM,1.15));(0,a.useEffect)(()=>{ez((0,$.dC)(eM,1.15))},[eM]);let eV=(0,a.useRef)(),[eU,e_]=(0,a.useState)(),[eH,eK]=(0,a.useState)(),[eW,e$]=(0,a.useState)(),eQ=(0,w.ZP)(e=>e.isApprovePanelShown),eJ=(0,a.useMemo)(()=>eP&&(0,c.n)(eP.token,(0,$.h9)(eP,eH),{alreadyDecimaled:!0}),[eP,eH]),eY=(0,a.useMemo)(()=>eR&&(0,c.n)(eR.token,(0,$.h9)(eR,eW),{alreadyDecimaled:!0}),[eR,eW]),eX=(0,a.useRef)(),e0=()=>"quick"===ep?eE:eT(),e4=()=>"quick"===ep?eS:eG(),e1=(0,Y.z)(()=>{ev("base"===eb?"quote":"base"),eA(eD&&(0,W.gt)(eD,0)?(0,$.hi)(1,eD):eD),ez(eI&&(0,W.gt)(eI,0)?(0,$.hi)(1,eI):eI)}),e2=(0,a.useMemo)(()=>{var e;return eM&&eI&&eD&&(e="base"===eb?eM:(0,$.hi)(1,eM),(0,W.eg)(e,eI)&&(0,W.G)(e,eD))},[eM,eb,eI,eD]),e6=(0,a.useMemo)(()=>(0,W.gt)(eI,0)&&(0,W.gt)(eD,0)&&(0,W.gt)(eD,eI),[eI,eD]);return(0,a.useEffect)(()=>{let e,t;if(el&&eM){if((0,W.gt)(e0(),0)){let{price:t,tick:n}=o({baseSide:eb,price:e0(),info:el.state});eF.current=t,eO(n),e=n,"custom"===ep&&eA(t)}if((0,W.gt)(e4(),0)){let{price:e,tick:n}=o({baseSide:eb,price:e4(),info:el.state});eV.current=e,e_(n),t=n,"custom"===ep&&ez(e)}if(null!=e&&null!=t&&t===e&&(t+=1,eO((e-=1)-1),e_(t+1)),es){if(eP&&eR&&null!=e&&null!=t){let n={connection:es,info:el.state,baseAmount:eP,quoteAmount:eR,tickLower:e,tickUpper:t,slippage:ed};m(n).then(e=>{let{resultBaseAmount:t,resultQuoteAmount:n,liquidity:l,amountSlippageBase:a,amountSlippageQuote:s}=e;eX.current={liquidity:l,amountSlippageBase:a.amount,amountSlippageQuote:s.amount},eq(l),eK(t),e$(n)})}}else eq(void 0),eK(void 0),e$(void 0)}},[ed,(0,Q.B)(eP),(0,Q.B)(eR),(0,Q.B)(eI),(0,Q.B)(eD),el,en,eM,eb,ep]),(0,l.jsxs)(L.Z,{className:"gap-4",children:[(0,l.jsxs)(L.Z,{className:"grid-cols-2 gap-3",children:[(0,l.jsx)(er,{selected:"quick"===ep,title:"Quick migration",description:"Very wide price range for a more passive strategy.",onClick:()=>{ex("quick")}}),(0,l.jsx)(er,{selected:"custom"===ep,title:"Custom migration",description:"Set a custom price range for higher capital efficiency.",onClick:()=>{ex("custom")}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-[#abc4ff] font-medium mb-2",children:"CLMM Pool"}),(0,l.jsxs)(V.Z,{className:"border-1.5 border-[#abc4ff40] rounded-xl py-2 px-4 justify-between",children:[(0,l.jsxs)(V.Z,{className:"gap-2",children:[(0,l.jsxs)("div",{className:"text-[#abc4ff] font-medium",children:[null!==(t=null==eZ?void 0:eZ.symbol)&&void 0!==t?t:"--","/",null!==(n=null==ek?void 0:ek.symbol)&&void 0!==n?n:"--"]}),(0,l.jsxs)("div",{className:"text-[#abc4ff] bg-[#abc4ff1f] text-xs rounded-full py-0.5 px-2 font-medium self-center",children:["Fee ",(0,H.Z)(eh)]})]}),(0,l.jsxs)(V.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"text-[#abc4ff80] text-sm font-medium",children:"Current price: "}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-base font-medium",children:(0,Q.B)("base"===eb?eM:(0,$.hi)(1,eM))}),(0,l.jsx)("div",{className:"text-[#abc4ff80] text-xs font-medium",children:"base"===eb?"".concat(null!==(s=null==ek?void 0:ek.symbol)&&void 0!==s?s:"--"," per ").concat(null!==(r=null==eZ?void 0:eZ.symbol)&&void 0!==r?r:"--"):"".concat(null!==(d=null==eZ?void 0:eZ.symbol)&&void 0!==d?d:"--"," per ").concat(null!==(u=null==ek?void 0:ek.symbol)&&void 0!==u?u:"--")})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(V.Z,{className:"items-center justify-between mb-1",children:[(0,l.jsx)("div",{className:"text-[#abc4ff] font-medium",children:"Price Range"}),(0,l.jsx)(z.Z,{tabs:[{label:"".concat(null!==(f=null==eZ?void 0:eZ.symbol)&&void 0!==f?f:"--"," price"),value:"base"},{label:"".concat(null!==(k=null==ek?void 0:ek.symbol)&&void 0!==k?k:"--"," price"),value:"quote"}],selectedValue:eb,onChange:()=>{e1()}})]}),"quick"===ep&&(0,l.jsxs)(V.Z,{className:"border-1.5 border-[#abc4ff40] rounded-xl py-2 px-4 justify-between",children:[(0,l.jsxs)("div",{className:"text-[#abc4ff] font-medium text-sm",children:[eE||"--"," - ",eS||"--"]}),(0,l.jsx)(V.Z,{className:"items-center gap-2",children:(0,l.jsx)("div",{className:"text-[#abc4ff80] text-sm font-medium",children:"base"===eb?"".concat(null!==(P=null==ek?void 0:ek.symbol)&&void 0!==P?P:"--"," per ").concat(null!==(R=null==eZ?void 0:eZ.symbol)&&void 0!==R?R:"--"):"".concat(null!==(E=null==eZ?void 0:eZ.symbol)&&void 0!==E?E:"--"," per ").concat(null!==(S=null==ek?void 0:ek.symbol)&&void 0!==S?S:"--")})})]}),"custom"===ep&&(0,l.jsxs)("div",{children:[(0,l.jsxs)(L.Z,{className:"grid-cols-2-fr gap-3",children:[(0,l.jsxs)(V.Z,{className:"border-1.5 ".concat(e2&&e6?"border-[#abc4ff40]":"border-[#DA2EEF]"," rounded-xl py-2 px-4 justify-between items-center"),children:[(0,l.jsx)("div",{className:"text-[#abc4ff80] text-sm",children:"Min"}),(0,l.jsx)(F.Z,{className:"font-medium text-sm text-white flex-grow",inputClassName:"text-right",decimalCount:eZ&&ek&&Math.max(null==eZ?void 0:eZ.decimals,null==ek?void 0:ek.decimals),value:eI,onUserInput:e=>{null!=e&&eA(e)}})]}),(0,l.jsxs)(V.Z,{className:"border-1.5 ".concat(e2&&e6?"border-[#abc4ff40]":"border-[#DA2EEF]"," rounded-xl py-2 px-4 justify-between items-center"),children:[(0,l.jsx)("div",{className:"text-[#abc4ff80] text-sm",children:"Max"}),(0,l.jsx)(F.Z,{className:"font-medium text-sm text-white flex-grow",inputClassName:"text-right",decimalCount:eZ&&ek&&Math.max(null==eZ?void 0:eZ.decimals,null==ek?void 0:ek.decimals),value:eD,onUserInput:e=>{null!=e&&ez(e)}})]})]}),e6?e2?null:(0,l.jsx)("div",{className:"text-[#da2eef] text-sm mt-1",children:"The current price is out of this range."}):(0,l.jsx)("div",{className:"text-[#da2eef] text-sm mt-1",children:"This range is invalid."})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(V.Z,{className:"pt-6 items-center gap-4",children:[(0,l.jsxs)(q.Z,{className:"relative grow border-1.5 border-[#abc4ff40] rounded-xl p-2 gap-1",children:[(0,l.jsx)("div",{className:"absolute -top-7 text-center left-0 right-0 text-sm text-[#abc4ff]",children:"Current position"}),(0,l.jsxs)(V.Z,{className:"justify-between items-center gap-4",children:[(0,l.jsxs)(V.Z,{className:"gap-1.5 items-center",children:[(0,l.jsx)(B.Z,{token:eZ,size:"xs"}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-xs",children:null!==(I=null==eZ?void 0:eZ.symbol)&&void 0!==I?I:"--"})]}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-xs",children:eP?(0,Q.B)(eP,{decimalLength:null==eZ?void 0:eZ.decimals}):"--"})]}),(0,l.jsxs)(V.Z,{className:"justify-between items-center gap-4",children:[(0,l.jsxs)(V.Z,{className:"gap-1.5 items-center",children:[(0,l.jsx)(B.Z,{token:ek,size:"xs"}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-xs",children:null!==(T=null==ek?void 0:ek.symbol)&&void 0!==T?T:"--"})]}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-xs",children:eR?(0,Q.B)(eR,{decimalLength:null==ek?void 0:ek.decimals}):"--"})]})]}),(0,l.jsx)(O.Z,{iconSrc:"/icons/migrate-clmm-right-arrow.svg",className:"w-6 h-6",iconClassName:"w-6 h-6"}),(0,l.jsxs)(q.Z,{className:"relative grow border-1.5 border-[#abc4ff40] border-dashed rounded-xl p-2 gap-1",children:[(0,l.jsx)("div",{className:"absolute -top-7 text-center left-0 right-0 text-sm text-[#abc4ff]",children:"CLMM Pool"}),(0,l.jsxs)(V.Z,{className:"justify-between items-center gap-4",children:[(0,l.jsx)(B.Z,{token:eZ,size:"xs"}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-xs",children:el?(0,Q.B)(eH)||"--":"(loading clmm)"})]}),(0,l.jsxs)(V.Z,{className:"justify-between items-center gap-4",children:[(0,l.jsx)(B.Z,{token:ek,size:"xs"}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-xs",children:el?(0,Q.B)(eW)||"--":"(loading clmm)"})]})]}),(0,l.jsx)(O.Z,{iconSrc:"/icons/migrate-clmm-add-icon.svg",className:"w-4 h-4",iconClassName:"w-4 h-4"}),(0,l.jsxs)(q.Z,{className:"relative grow border-1.5 border-[#abc4ff40] border-dashed rounded-xl p-2 gap-1",children:[(0,l.jsx)("div",{className:"absolute -top-7 text-center left-0 right-0 text-sm text-[#abc4ff]",children:"Wallet"}),(0,l.jsxs)(V.Z,{className:"justify-between items-center gap-4",children:[(0,l.jsx)(B.Z,{token:eZ,size:"xs"}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-xs",children:el?(0,Q.B)(eJ):"(loading clmm)"})]}),(0,l.jsxs)(V.Z,{className:"justify-between items-center gap-4",children:[(0,l.jsx)(B.Z,{token:ek,size:"xs"}),(0,l.jsx)("div",{className:"text-[#abc4ff] text-xs",children:el?(0,Q.B)(eY):"(loading clmm)"})]})]})]}),J&&J.rewards.some(e=>(0,W.gt)(e.userPendingReward,0))&&(0,l.jsxs)("div",{className:"text-[#abc4ff] text-sm mt-2",children:["* Migrating will also harvest"," ",(0,l.jsx)("span",{className:"font-bold",children:(0,U.DB)(J.rewards.map(e=>{let{token:t,userPendingReward:n,userHavedReward:a}=e;return a&&t&&(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{children:(0,Q.B)(n)})," ",(0,l.jsx)("span",{children:null!==(D=null==n?void 0:n.token.symbol)&&void 0!==D?D:"UNKNOWN"})]},(0,b.ZP)(null==t?void 0:t.mint))}))})," ","in pending rewards."]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)(V.Z,{className:"items-center justify-between mb-1",children:[(0,l.jsxs)(V.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"text-[#abc4ff] font-medium",children:"Estimated APR"}),(0,l.jsx)(et.T,{})]}),(0,l.jsx)(z.Z,{tabs:[{label:"24H",value:"24H"},{label:"7D",value:"7D"},{label:"30D",value:"30D"}],selectedValue:ey,onChange:e=>C.ZP.setState({timeBasis:e.value})})]}),(0,l.jsx)(V.Z,{className:"border-1.5 border-[#abc4ff40] rounded-xl py-2 px-4 justify-between",children:(0,l.jsx)(ei,{className:e6?"":"opacity-0",clmmInfo:el,liquidity:eB,lowerTick:eL,upperTick:eU})})]}),(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(A.Z,{className:"w-full frosted-glass-teal",isLoading:eu||eQ,onClick:()=>{(0,x.Z)(null!==eL&&null!==eU,"not calc price range successfully"),(0,x.Z)(eX.current,"not calc amount slippage successfully"),(0,x.Z)(G,"liquidity info not load successfully"),em(),(function(e){let{tickLower:t,tickUpper:n,liquidity:l,amountMaxA:a,amountMaxB:s,farmInfo:r,liquidityInfo:o,liquidityLpAmount:c,currentClmmPool:d}=e;return(0,j.ZP)(async e=>{var u,m;let{transactionCollector:f,baseUtils:{connection:j,owner:k}}=e,{tokenAccountRawInfos:w}=N.Z.getState();(0,x.Z)(d,"not seleted clmm pool");let{jsonInfos:C}=h.Z.getState(),P=C.find(e=>{let{id:t}=e;return t===(0,b.ZP)(o.id)});(0,x.Z)(P,"can't find liquidity pool");let{innerTransactions:R}=await i.ZpI.makeRemoveAllLpAndCreateClmmPosition({connection:j,poolKeys:(0,y.R)(P),clmmPoolKeys:d.state,farmInfo:r?{poolKeys:(0,y.R)(r.jsonInfo),amount:null!==(m=null===(u=r.userStakedLpAmount)||void 0===u?void 0:u.raw)&&void 0!==m?m:i.xEJ}:void 0,createPositionInfo:{tickLower:t,tickUpper:n,liquidity:l.mul(new(p())(99)).div(new(p())(100)),amountMaxA:a,amountMaxB:s},removeLpAmount:null!=c?c:i.xEJ,userKeys:{tokenAccounts:w,owner:k},computeBudgetConfig:await (0,g.u)(),checkCreateATAOwner:!0}),M=(0,Z.AX)(()=>{v.Z.getState().refreshFarmInfos()},{once:!0});f.add(R,{onTxError:()=>(0,Z.Ce)(M),onTxSentError:()=>(0,Z.Ce)(M),onTxAllSuccess:()=>{setTimeout(()=>{v.Z.getState().refreshFarmInfos(),(0,Z.Ce)(M)},1e3)},txHistoryInfo:{title:"Migrate To CLMM",description:"Migrate LP to CLMM position"}})})})({liquidity:eX.current.liquidity,tickLower:eL,tickUpper:eU,amountMaxA:eX.current.amountSlippageBase,amountMaxB:eX.current.amountSlippageQuote,currentClmmPool:el,farmInfo:J,liquidityInfo:G,liquidityLpAmount:J?void 0:null==ej?void 0:ej.raw}).then(e=>{let{allSuccess:t}=e;t&&(null==ea||ea())}).finally(ef)},validators:[{should:el,fallbackProps:{children:"loading..."}},{should:e6}],children:"Migrate"})})]})}function ei(e){let{className:t,clmmInfo:n,liquidity:a,lowerTick:s,upperTick:i}=e,r=["#abc4ff","#37bbe0","#2b6aff","#335095"],o=(0,en.HU)({ammPool:n,forceInfo:{liquidity:a,tickLower:s,tickUpper:i}}),c=o&&[o.fee.percentInTotal,...o.rewards.map(e=>e.percentInTotal)];return(0,l.jsxs)(V.Z,{className:(0,el.m)("gap-2 w-full justify-between text-[#fff] ".concat(n?"":"opacity-0"),t),children:[(0,l.jsxs)(V.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{children:(0,H.Z)(null==o?void 0:o.apr)}),(0,l.jsx)("div",{className:"w-[18px] h-[18px] rounded-full flex-none",style:{background:c&&"conic-gradient(".concat(c.map((e,t)=>{let n=c.slice(0,t).reduce((e,t)=>(0,_.y)((0,$.IH)(e,t)),(0,_.y)(0)),l=(0,_.y)((0,$.IH)(n,e));return["".concat(r[t]," ").concat((0,H.Z)(n)),"".concat(r[t]," ").concat((0,H.Z)(l))].join(", ")}).join(", "),")"),WebkitMaskImage:"radial-gradient(transparent 43%, black 44%)",maskImage:"radial-gradient(transparent 43%, black 44%)"}})]}),(0,l.jsxs)(V.Z,{className:"content-around gap-4",children:[(0,l.jsxs)(V.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:"#abc4ff"}}),(0,l.jsx)("div",{className:"w-18 text-[#abc4ff] text-sm mobile:text-xs",children:"Trade Fee"}),(0,l.jsx)("div",{className:"text-sm",children:(0,H.Z)(null==o?void 0:o.fee.apr)})]}),null==o?void 0:o.rewards.map((e,t)=>{let{token:n,apr:a}=e,s=r.slice(1);return(0,l.jsxs)(V.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:s[t]}}),(0,l.jsx)("div",{className:"w-18 text-[#abc4ff] text-sm mobile:text-xs",children:null==n?void 0:n.symbol}),(0,l.jsx)("div",{className:"text-sm",children:(0,H.Z)(a)})]},(0,b.ZP)(null==n?void 0:n.mint))})]})]})}function er(e){let{title:t,description:n,selected:a,onClick:s}=e;return(0,l.jsxs)("div",{onClick:s,className:"relative border-1.5 ".concat(a?"border-[#39d0d8]":"border-[#abc4ff40]"," rounded-xl py-3 px-4 bg-[#141041] cursor-pointer"),children:[a&&(0,l.jsx)(O.Z,{size:"sm",className:"absolute right-3 top-3",iconSrc:"/icons/migrate-check-icon.svg"}),(0,l.jsx)("div",{className:"font-medium text-base text-white mb-1",children:t}),(0,l.jsx)("div",{className:"font-normal text-sm  ".concat(a?"text-[#ABC4FF]":"text-[#ABC4FF80]"),children:n})]})}},91107:function(e,t,n){n.d(t,{E:function(){return E}});var l,a,s=n(67294),i=n(12351),r=n(19946),o=n(32984),c=n(16723),d=n(61363),u=n(84575),m=n(95389),f=n(39516),p=n(15466),x=n(23784),b=n(46045),v=n(18689),h=n(73781),g=n(31147),j=n(64103),y=n(3855),N=n(94192),Z=((l=Z||{})[l.RegisterOption=0]="RegisterOption",l[l.UnregisterOption=1]="UnregisterOption",l);let k={0(e,t){let n=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:(0,u.z2)(n,e=>e.element.current)}},1(e,t){let n=e.options.slice(),l=e.options.findIndex(e=>e.id===t.id);return -1===l?e:(n.splice(l,1),{...e,options:n})}},w=(0,s.createContext)(null);w.displayName="RadioGroupDataContext";let C=(0,s.createContext)(null);function P(e,t){return(0,o.E)(t.type,k,e,t)}C.displayName="RadioGroupActionsContext";let R=(0,i.yV)(function(e,t){let n=(0,r.M)(),{id:l=`headlessui-radiogroup-${n}`,value:a,defaultValue:o,name:j,onChange:y,by:Z=(e,t)=>e===t,disabled:k=!1,...R}=e,M=(0,h.z)("string"==typeof Z?(e,t)=>(null==e?void 0:e[Z])===(null==t?void 0:t[Z]):Z),[E,S]=(0,s.useReducer)(P,{options:[]}),I=E.options,[A,T]=(0,m.b)(),[B,q]=(0,f.f)(),F=(0,s.useRef)(null),L=(0,x.T)(F,t),[O,D]=(0,g.q)(a,y,o),z=(0,s.useMemo)(()=>I.find(e=>!e.propsRef.current.disabled),[I]),G=(0,s.useMemo)(()=>I.some(e=>M(e.propsRef.current.value,O)),[I,O]),V=(0,h.z)(e=>{var t;if(k||M(e,O))return!1;let n=null==(t=I.find(t=>M(t.propsRef.current.value,e)))?void 0:t.propsRef.current;return(null==n||!n.disabled)&&(null==D||D(e),!0)});!function({container:e,accept:t,walk:n,enabled:l=!0}){let a=(0,s.useRef)(t),i=(0,s.useRef)(n);(0,s.useEffect)(()=>{a.current=t,i.current=n},[t,n]),(0,c.e)(()=>{if(!e||!l)return;let t=(0,p.r)(e);if(!t)return;let n=a.current,s=i.current,r=Object.assign(e=>n(e),{acceptNode:n}),o=t.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,r,!1);for(;o.nextNode();)s(o.currentNode)},[e,l,a,i])}({container:F.current,accept:e=>"radio"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let U=(0,h.z)(e=>{let t=F.current;if(!t)return;let n=(0,p.r)(t),l=I.filter(e=>!1===e.propsRef.current.disabled).map(e=>e.element.current);switch(e.key){case d.R.Enter:(0,v.g)(e.currentTarget);break;case d.R.ArrowLeft:case d.R.ArrowUp:if(e.preventDefault(),e.stopPropagation(),(0,u.jA)(l,u.TO.Previous|u.TO.WrapAround)===u.fE.Success){let e=I.find(e=>e.element.current===(null==n?void 0:n.activeElement));e&&V(e.propsRef.current.value)}break;case d.R.ArrowRight:case d.R.ArrowDown:if(e.preventDefault(),e.stopPropagation(),(0,u.jA)(l,u.TO.Next|u.TO.WrapAround)===u.fE.Success){let e=I.find(e=>e.element.current===(null==n?void 0:n.activeElement));e&&V(e.propsRef.current.value)}break;case d.R.Space:{e.preventDefault(),e.stopPropagation();let t=I.find(e=>e.element.current===(null==n?void 0:n.activeElement));t&&V(t.propsRef.current.value)}}}),_=(0,h.z)(e=>(S({type:0,...e}),()=>S({type:1,id:e.id}))),H=(0,s.useMemo)(()=>({value:O,firstOption:z,containsCheckedOption:G,disabled:k,compare:M,...E}),[O,z,G,k,M,E]),K=(0,s.useMemo)(()=>({registerOption:_,change:V}),[_,V]),W=(0,s.useMemo)(()=>({value:O}),[O]),$=(0,s.useRef)(null),Q=(0,N.G)();return(0,s.useEffect)(()=>{$.current&&void 0!==o&&Q.addEventListener($.current,"reset",()=>{V(o)})},[$,V]),s.createElement(q,{name:"RadioGroup.Description"},s.createElement(T,{name:"RadioGroup.Label"},s.createElement(C.Provider,{value:K},s.createElement(w.Provider,{value:H},null!=j&&null!=O&&(0,v.t)({[j]:O}).map(([e,t],n)=>s.createElement(b._,{features:b.A.Hidden,ref:0===n?e=>{var t;$.current=null!=(t=null==e?void 0:e.closest("form"))?t:null}:void 0,...(0,i.oA)({key:e,as:"input",type:"radio",checked:null!=t,hidden:!0,readOnly:!0,name:e,value:t})})),(0,i.sY)({ourProps:{ref:L,id:l,role:"radiogroup","aria-labelledby":A,"aria-describedby":B,onKeyDown:U},theirProps:R,slot:W,defaultTag:"div",name:"RadioGroup"})))))});var M=((a=M||{})[a.Empty=1]="Empty",a[a.Active=2]="Active",a);let E=Object.assign(R,{Option:(0,i.yV)(function(e,t){var n;let l=(0,r.M)(),{id:a=`headlessui-radiogroup-option-${l}`,value:o,disabled:d=!1,...u}=e,p=(0,s.useRef)(null),b=(0,x.T)(p,t),[v,g]=(0,m.b)(),[N,Z]=(0,f.f)(),{addFlag:k,removeFlag:P,hasFlag:R}=function(e=0){let[t,n]=(0,s.useState)(e);return{addFlag:(0,s.useCallback)(e=>n(t=>t|e),[t]),hasFlag:(0,s.useCallback)(e=>!!(t&e),[t]),removeFlag:(0,s.useCallback)(e=>n(t=>t&~e),[n]),toggleFlag:(0,s.useCallback)(e=>n(t=>t^e),[n])}}(1),M=(0,y.E)({value:o,disabled:d}),E=function e(t){let n=(0,s.useContext)(w);if(null===n){let n=Error(`<${t} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,e),n}return n}("RadioGroup.Option"),S=function e(t){let n=(0,s.useContext)(C);if(null===n){let n=Error(`<${t} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,e),n}return n}("RadioGroup.Option");(0,c.e)(()=>S.registerOption({id:a,element:p,propsRef:M}),[a,S,p,e]);let I=(0,h.z)(e=>{var t;if((0,j.P)(e.currentTarget))return e.preventDefault();S.change(o)&&(k(2),null==(t=p.current)||t.focus())}),A=(0,h.z)(e=>{if((0,j.P)(e.currentTarget))return e.preventDefault();k(2)}),T=(0,h.z)(()=>P(2)),B=(null==(n=E.firstOption)?void 0:n.id)===a,q=E.disabled||d,F=E.compare(E.value,o),L={ref:b,id:a,role:"radio","aria-checked":F?"true":"false","aria-labelledby":v,"aria-describedby":N,"aria-disabled":!!q||void 0,tabIndex:q?-1:F||!E.containsCheckedOption&&B?0:-1,onClick:q?void 0:I,onFocus:q?void 0:A,onBlur:q?void 0:T},O=(0,s.useMemo)(()=>({checked:F,disabled:q,active:R(2)}),[F,q,R]);return s.createElement(Z,{name:"RadioGroup.Description"},s.createElement(g,{name:"RadioGroup.Label"},(0,i.sY)({ourProps:L,theirProps:u,slot:O,defaultTag:"div",name:"RadioGroup.Option"})))}),Label:m._,Description:f.d})}}]);